<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Efeito Carrossel - HTML e CSS</title>
    <link rel="stylesheet" href="./css/reset.min.css">
    <link rel="stylesheet" href="./css/default.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/animation.css">


    

    <script type="text/javascript" src="https://public.tableau.com/javascripts/api/tableau-2.8.0.min.js"></script>

    <script type="text/javascript">

        window.addEventListener("load", mediaSizer);
        //window.addEventListener("resize", mediaSizer);
        // Listeners that will react when the page first loads or is resized.
        // If any of these events take place the mediaSizer() function executes.

        var vizList = [

            "https://us-east-1.online.tableau.com/pulse/site/luizoliveira/metrics/c396fb85-29fd-4aca-9695-22a3aef87505",
            "https://us-east-1.online.tableau.com/pulse/site/luizoliveira/metrics/f52196fc-3d1f-4295-8e6c-6886faf757dc",
            "https://us-east-1.online.tableau.com/pulse/site/luizoliveira/metrics/a2103f6d-4ebc-49a2-bd7c-7febf356b713",
            "https://us-east-1.online.tableau.com/pulse/site/luizoliveira/metrics/b0a6bd13-beb5-4f21-9308-dc4b46dcd613",
            "https://us-east-1.online.tableau.com/pulse/site/luizoliveira/metrics/c396fb85-29fd-4aca-9695-22a3aef87505"
        ];
        // Array of Tableau Server URLs for dashboard or sheet navigation.

        var viz,
        vizNav=0;
            vizLen = vizList.length,
            vizCount = 0,
            devType;
            x,
            vizNav=0;
        var options = {
            device: devType,
        };

    function showDiv(myDIV) {
        var x = document.getElementById("myDIV");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }

        function mediaSizer() {
            // Determines the correct viz layout according to screen sizes.
            if (window.matchMedia("(max-width: 480px)").matches) {
                //alert("I am a phone layout!");
                devType = 'phone';
                vWidth = 415;
                vHeight = 950;
                //options.device = 'phone';
            } else if (window.matchMedia("(max-width: 980px)").matches) {
                //alert("I am a tablet layout!");
                devType = 'tablet';
                vWidth = 980;
                //options.device = 'tablet';
            } else {
                //alert("I am a desktop layout!");
                devType = 'desktop';
                vWidth = 1666;
                vHeight = 900;
                //options.device = 'desktop';
            }
           
            console.log("launch0");

            setInterval(() => {
                console.log("Refreshing...");
                console.log("viz0");
              var x = document.getElementById("vizcontainer0");
             console.log("passou de x");
        
                viz.refreshDataAsync();
            }, 4000);

            setInterval(() => {
                console.log("Refreshing...");
                console.log("viz4");
              var x = document.getElementById("vizcontainer4");
             console.log("passou de x");
        
                viz.refreshDataAsync();
            }, 4000);
            
            launchViz(0);
            //viz.refreshDataAsync();
            
            launchViz(1);
           
            launchViz(2);
            
            launchViz(3);
         
            launchViz(4);
            
     
       
 





            // Launches the viz again with the new sizing at the current index of vizList.
        }


        function launchViz(vizNav) {
            // JS object targeting a div in the html document. (vizNav) will pass navigation values to move back and forth across vizList.
            console.log("launchviz")
            
            var vizDiv = document.getElementById("vizContainer"+vizNav),
                // Will embed the visualization on a div with id="VizContainer"
                options = {
                    device: devType,
                    width: vWidth,
                    height: vHeight,
                    hideTabs: true,
                    hideToolbar: true,
                    onFirstInteractive: function () {
                        listenToMarksSelection();
                    }
                };


            var vizURL = vizList[vizNav];
            // Dynamic URL returning the string from vizList at index = vizNav (viz to be displayed).

            try {
                // Initializes the viz from the array with desired options. 
                viz = new tableau.Viz(vizDiv, vizURL, options);
                if (!viz) throw 'viz not initialized'
            }
            catch (err) {
                alert(err);
            }
            finally {
                console.log('whatever')
                console.count('initViz')
            }

        }

    </script>


</head>
<body>

    <div class="container">

        <header class="header">
            <h1>Efeito Carrossel Pulse para Frigelar TV</h1>
        </header>

        <main class="main">

            <section class="galery">
                <div class="divisoes">
                    


                    <div style="text-align: center;">
                    
                            <div class="unimed" id="vizContainer0" ></div>
                            
                            <div class="unimed" id="vizContainer1" ></div>
                     
                            <div class="unimed" id="vizContainer2"></div>
                    
                            <div class="unimed" id="vizContainer3"></div>
                     
                            <div class="unimed" id="vizContainer4" ></div>

                      
                    </div>

                    
                </div>
            </section>

        </main>

      
    </div>
    
</body>
</html>
